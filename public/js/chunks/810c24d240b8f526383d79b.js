(self.webpackChunk=self.webpackChunk||[]).push([[810],{6537:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(4015),o=a.n(n),r=a(3645),l=a.n(r)()(o());l.push([e.id,"#mapid[data-v-2cf52978]{min-height:calc(100vh - 64px);position:absolute;height:calc(100vh - 64px);width:100%}.map-top-dialog[data-v-2cf52978]{z-index:10001!important}","",{version:3,sources:["webpack://./resources/js/pages/Map.vue"],names:[],mappings:"AAyLA,wBACA,6BAAA,CACA,iBAAA,CACA,yBAAA,CACA,UACA,CACA,iCACA,uBACA",sourcesContent:["<template>\n    <div class=\"ma-0 pa-0\" style=\"position: relative; display: flex;\">\n        <div id=\"mapid\"></div>\n        <v-dialog v-model=\"show\">\n            <v-container map-top-dialog>\n                <v-card elevation=\"0\">\n                    <v-card-title>Создание зоны</v-card-title>\n                    <v-card-text>\n                        <v-text-field\n                                v-model=\"place.name\"\n                                label=\"Название\"/>\n                        <v-text-field\n                                v-model=\"place.points\"\n                                type=\"number\"\n                                label=\"Баллы благодарности\"/>\n                        <v-color-picker\n                                dot-size=\"32\"\n                                hide-canvas\n                                hide-mode-switch\n                                mode=\"hexa\"\n                                v-model=\"place.color\"\n                                swatches-max-height=\"200\"\n                        ></v-color-picker>\n                        <v-btn color=\"dark\" @click=\"save\" :disabled=\"place.name == ''\">\n                            Сохранить\n                        </v-btn>\n                    </v-card-text>\n                </v-card>\n            </v-container>\n        </v-dialog>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"Map\",\n        data: (vm) => ({\n            mymap : null,\n            editableLayers:new L.FeatureGroup(),\n            places: [],\n            place: {},\n            show: false,\n            drawControl: null,\n        }),\n        mounted() {\n            this.mymap = L.map('mapid', {drawControl: false}).setView([55.536446, 47.498600], 13);\n            let osm = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoianVyYTk2IiwiYSI6ImNrcGw1MWVzODFkazQyd284bjY0ZWIxbmIifQ.CWG9L2rMStLO3i3AOgrnyQ', {\n                attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n                maxZoom: 18,\n                id: 'mapbox/streets-v11',\n                tileSize: 512,\n                zoomOffset: -1,\n                accessToken: 'your.mapbox.access.token'\n            })\n            osm.addTo(this.mymap)\n            var options = {\n                position: 'topright',\n                draw: {\n                    polyline: false,\n                    polygon: {\n                        allowIntersection: true, // Restricts shapes to simple polygons\n                        drawError: {\n                            color: '#e1e100', // Color the shape will turn when intersects\n                            message: 'Вы не может поставить тут точку' // Message that will show when intersect\n                        },\n                        shapeOptions: {\n                            color: '#bada55'\n                        }\n                    },\n                    circle: false, // Turns off this drawing tool\n                    circlemarker: false, // Turns off this drawing tool\n                    rectangle: false,\n                    marker: true,\n                },\n                edit: {\n                    featureGroup: this.editableLayers, //REQUIRED!!\n                    remove: true,\n                    edit: true,\n                }\n            };\n            this.mymap.addLayer(this.editableLayers);\n\n            this.drawControl = new L.Control.Draw(options);\n            if (this.$store.state.auth.user.role === 1024) this.mymap.addControl(this.drawControl);\n            this.mymap.on(L.Draw.Event.CREATED,  (e) => {\n                var type = e.layerType,\n                    layer = e.layer;\n                this.place = {\n                    coords: e.layerType === 'point' ? layer._latlngs : layer._latlng,\n                    layer,\n                    type,\n                };\n                this.show = true;\n            });\n            this.mymap.on(L.Draw.Event.EDITED,  (e) => {\n                if (Object.values(e.layers._layers).length !== 1) {\n                    if (Object.values(e.layers._layers).length>1) {\n                        alert('Редактировать можно только 1 объект');\n                        window.location.reload();\n                    }\n                    return;\n                }\n                Object.values(e.layers._layers).forEach((l) => {\n                    this.place = {\n                        ...l.place,\n                        coords: l._latlngs,\n                        layer:l,\n                    };\n                    this.show = true;\n                });\n            });\n            this.mymap.on(L.Draw.Event.DELETED,  (e) => {\n                Object.values(e.layers._layers).forEach((l) => {\n                    this.delete(l.place);\n                })\n            });\n\n            this.getPlaces();\n        },\n        methods: {\n            addDivMarker(coords, color, popup) {\n                const myCustomColour = color.substr(0,7);\n                const markerHtmlStyles = `background-color: ${myCustomColour}; width: 2rem;height: 2rem;display: block;\n                          left: -1rem;top: -1rem;position: relative;border-radius: 2rem 2rem 0;transform: rotate(45deg);border: 1px solid #FFFFFF`\n                const icon = L.divIcon({\n                    className: \"my-custom-pin\",\n                    iconAnchor: [0, 24],\n                    labelAnchor: [-6, 0],\n                    popupAnchor: [0, -36],\n                    html: `<span style=\"${markerHtmlStyles}\" />`\n                });\n                L.marker(coords, {icon})\n                    .addTo(this.mymap)\n                    .bindPopup(popup);\n            },\n            getPlaces() {\n                window.axios.get('/mapObject/', {params: {}}).then((response) => {\n                    this.places = response.data.data;\n                    this.places.filter((v) => v.type === 'polygon').forEach((p,i) => {\n                        let polygon = L.polygon(p.coords, {color: p.color});\n                        polygon.addTo(this.mymap)\n                            .bindPopup(p.name+'<br/>'+(p.points > 0  ? 'Требуются баллы: ' + p.points : ''));\n                        this.places[i].polygon = polygon;\n                        polygon.place = p;\n                        this.editableLayers.addLayer(polygon);\n                    })\n                    this.places.filter((v) => v.type === 'marker').forEach((p,i) => {\n                       this.addDivMarker({lat:p.lat, lng:p.lng}, p.color, p.name+'<br/>'+(p.points > 0  ? 'Требуются баллы: ' + p.points : ''));\n                    })\n                }).catch((e) => {\n                    console.log(e);\n                });\n            },\n            save() {\n                let data = {\n                    id: this.place.id,\n                    color: this.place.color,\n                    coords: this.place.coords,\n                    name: this.place.name,\n                    points: this.place.points,\n                    type: this.place.type,\n                };\n                data.color = data.color.hexa || data.color;\n                window.axios[data.id ?'put' : 'post']('/mapObject/'+(data.id||''), data).then((response) => {\n                    this.getPlaces();\n                    this.place = {};\n                    this.show = false;\n                    // this.mymap.addLayer(this.place.layer);\n                }).catch((e) => {\n                    alert('Ошибка. Проверьте данные.');\n                    console.log(e);\n                });\n            },\n            delete(place){\n                window.axios.delete('/mapObject/'+place.id).then((response) => {\n                    this.getPlaces();\n                }).catch((e) => {\n                    console.log(e);\n                });\n            }\n        }\n    }\n<\/script>\n\n<style scoped>\n    #mapid {\n        min-height: calc(100vh - 64px);\n        position:absolute;\n        height: calc(100vh - 64px);\n        width: 100%;\n    }\n    .map-top-dialog{\n        z-index: 10001 !important;\n    }\n</style>\n"],sourceRoot:""}]);const s=l},8810:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={name:"Map",data:function(e){return{mymap:null,editableLayers:new L.FeatureGroup,places:[],place:{},show:!1,drawControl:null}},mounted:function(){var e=this;this.mymap=L.map("mapid",{drawControl:!1}).setView([55.536446,47.4986],13),L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoianVyYTk2IiwiYSI6ImNrcGw1MWVzODFkazQyd284bjY0ZWIxbmIifQ.CWG9L2rMStLO3i3AOgrnyQ",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"your.mapbox.access.token"}).addTo(this.mymap);var t={position:"topright",draw:{polyline:!1,polygon:{allowIntersection:!0,drawError:{color:"#e1e100",message:"Вы не может поставить тут точку"},shapeOptions:{color:"#bada55"}},circle:!1,circlemarker:!1,rectangle:!1,marker:!0},edit:{featureGroup:this.editableLayers,remove:!0,edit:!0}};this.mymap.addLayer(this.editableLayers),this.drawControl=new L.Control.Draw(t),1024===this.$store.state.auth.user.role&&this.mymap.addControl(this.drawControl),this.mymap.on(L.Draw.Event.CREATED,(function(t){var a=t.layerType,n=t.layer;e.place={coords:"point"===t.layerType?n._latlngs:n._latlng,layer:n,type:a},e.show=!0})),this.mymap.on(L.Draw.Event.EDITED,(function(t){1===Object.values(t.layers._layers).length?Object.values(t.layers._layers).forEach((function(t){e.place=o(o({},t.place),{},{coords:t._latlngs,layer:t}),e.show=!0})):Object.values(t.layers._layers).length>1&&(alert("Редактировать можно только 1 объект"),window.location.reload())})),this.mymap.on(L.Draw.Event.DELETED,(function(t){Object.values(t.layers._layers).forEach((function(t){e.delete(t.place)}))})),this.getPlaces()},methods:{addDivMarker:function(e,t,a){var n=t.substr(0,7),o="background-color: ".concat(n,"; width: 2rem;height: 2rem;display: block;\n                      left: -1rem;top: -1rem;position: relative;border-radius: 2rem 2rem 0;transform: rotate(45deg);border: 1px solid #FFFFFF"),r=L.divIcon({className:"my-custom-pin",iconAnchor:[0,24],labelAnchor:[-6,0],popupAnchor:[0,-36],html:'<span style="'.concat(o,'" />')});L.marker(e,{icon:r}).addTo(this.mymap).bindPopup(a)},getPlaces:function(){var e=this;window.axios.get("/mapObject/",{params:{}}).then((function(t){e.places=t.data.data,e.places.filter((function(e){return"polygon"===e.type})).forEach((function(t,a){var n=L.polygon(t.coords,{color:t.color});n.addTo(e.mymap).bindPopup(t.name+"<br/>"+(t.points>0?"Требуются баллы: "+t.points:"")),e.places[a].polygon=n,n.place=t,e.editableLayers.addLayer(n)})),e.places.filter((function(e){return"marker"===e.type})).forEach((function(t,a){e.addDivMarker({lat:t.lat,lng:t.lng},t.color,t.name+"<br/>"+(t.points>0?"Требуются баллы: "+t.points:""))}))})).catch((function(e){console.log(e)}))},save:function(){var e=this,t={id:this.place.id,color:this.place.color,coords:this.place.coords,name:this.place.name,points:this.place.points,type:this.place.type};t.color=t.color.hexa||t.color,window.axios[t.id?"put":"post"]("/mapObject/"+(t.id||""),t).then((function(t){e.getPlaces(),e.place={},e.show=!1})).catch((function(e){alert("Ошибка. Проверьте данные."),console.log(e)}))},delete:function(e){var t=this;window.axios.delete("/mapObject/"+e.id).then((function(e){t.getPlaces()})).catch((function(e){console.log(e)}))}}};a(4080);const s=(0,a(1900).Z)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ma-0 pa-0",staticStyle:{position:"relative",display:"flex"}},[a("div",{attrs:{id:"mapid"}}),e._v(" "),a("v-dialog",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-container",{attrs:{"map-top-dialog":""}},[a("v-card",{attrs:{elevation:"0"}},[a("v-card-title",[e._v("Создание зоны")]),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:"Название"},model:{value:e.place.name,callback:function(t){e.$set(e.place,"name",t)},expression:"place.name"}}),e._v(" "),a("v-text-field",{attrs:{type:"number",label:"Баллы благодарности"},model:{value:e.place.points,callback:function(t){e.$set(e.place,"points",t)},expression:"place.points"}}),e._v(" "),a("v-color-picker",{attrs:{"dot-size":"32","hide-canvas":"","hide-mode-switch":"",mode:"hexa","swatches-max-height":"200"},model:{value:e.place.color,callback:function(t){e.$set(e.place,"color",t)},expression:"place.color"}}),e._v(" "),a("v-btn",{attrs:{color:"dark",disabled:""==e.place.name},on:{click:e.save}},[e._v("\n                        Сохранить\n                    ")])],1)],1)],1)],1)],1)}),[],!1,null,"2cf52978",null).exports},4080:(e,t,a)=>{var n=a(6537);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(5346).Z)("fb3d8b9c",n,!0,{})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvcGFnZXMvTWFwLnZ1ZT81OWZjIiwid2VicGFjazovLy9yZXNvdXJjZXMvanMvcGFnZXMvTWFwLnZ1ZSIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvcGFnZXMvTWFwLnZ1ZT85YTNkIiwid2VicGFjazovLy8uL3Jlc291cmNlcy9qcy9wYWdlcy9NYXAudnVlIiwid2VicGFjazovLy8uL3Jlc291cmNlcy9qcy9wYWdlcy9NYXAudnVlP2Q0ODUiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL3BhZ2VzL01hcC52dWU/MjI3NiJdLCJuYW1lcyI6WyJfX19DU1NfTE9BREVSX0VYUE9SVF9fXyIsInB1c2giLCJtb2R1bGUiLCJpZCIsIl92bSIsInRoaXMiLCJfaCIsIiRjcmVhdGVFbGVtZW50IiwiX2MiLCJfc2VsZiIsInN0YXRpY0NsYXNzIiwic3RhdGljU3R5bGUiLCJhdHRycyIsIl92IiwibW9kZWwiLCJ2YWx1ZSIsImNhbGxiYWNrIiwiJCR2Iiwic2hvdyIsImV4cHJlc3Npb24iLCJwbGFjZSIsIiRzZXQiLCJuYW1lIiwib24iLCJzYXZlIiwiY29udGVudCIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwibG9jYWxzIiwiZXhwb3J0cyIsImFkZCJdLCJtYXBwaW5ncyI6ImtKQUdJQSxFLE1BQTBCLEdBQTRCLEtBRTFEQSxFQUF3QkMsS0FBSyxDQUFDQyxFQUFPQyxHQUFJLHlLQUEwSyxHQUFHLENBQUMsUUFBVSxFQUFFLFFBQVUsQ0FBQywwQ0FBMEMsTUFBUSxHQUFHLFNBQVcscUVBQXFFLGVBQWlCLENBQUMsNnJRQUE0clEsV0FBYSxNQUU5a1IsVyxpdkJDMkJBLE1DbEM4TSxFRGtDOU0sQ0FDRSxLQUFGLE1BQ0UsS0FBRixZQUFJLE1BQUosQ0FDTSxNQUFOLEtBQ00sZUFBTixtQkFDTSxPQUFOLEdBQ00sTUFBTixHQUNNLE1BQU4sRUFDTSxZQUFOLE9BRUUsUUFWRixXQVVJLElBQUosT0FDSSxLQUFKLHFC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dUJFLE1BQU0sQ0FBQ0MsTUFBT1gsRUFBSWdCLE1BQVksT0FBRUosU0FBUyxTQUFVQyxHQUFNYixFQUFJaUIsS0FBS2pCLEVBQUlnQixNQUFPLFNBQVVILElBQU1FLFdBQVcsa0JBQWtCZixFQUFJUyxHQUFHLEtBQUtMLEVBQUcsaUJBQWlCLENBQUNJLE1BQU0sQ0FBQyxXQUFXLEtBQUssY0FBYyxHQUFHLG1CQUFtQixHQUFHLEtBQU8sT0FBTyxzQkFBc0IsT0FBT0UsTUFBTSxDQUFDQyxNQUFPWCxFQUFJZ0IsTUFBVyxNQUFFSixTQUFTLFNBQVVDLEdBQU1iLEVBQUlpQixLQUFLakIsRUFBSWdCLE1BQU8sUUFBU0gsSUFBTUUsV0FBVyxpQkFBaUJmLEVBQUlTLEdBQUcsS0FBS0wsRUFBRyxRQUFRLENBQUNJLE1BQU0sQ0FBQyxNQUFRLE9BQU8sU0FBNkIsSUFBbEJSLEVBQUlnQixNQUFNRSxNQUFZQyxHQUFHLENBQUMsTUFBUW5CLEVBQUlvQixPQUFPLENBQUNwQixFQUFJUyxHQUFHLGdFQUFnRSxJQUFJLElBQUksSUFBSSxJQUFJLEtBQ3J3QyxJRFdwQixFQUNBLEtBQ0EsV0FDQSxNLHdCRVpGLElBQUlZLEVBQVUsRUFBUSxNQUNuQkEsRUFBUUMsYUFBWUQsRUFBVUEsRUFBUUUsU0FDbkIsaUJBQVpGLElBQXNCQSxFQUFVLENBQUMsQ0FBQ3ZCLEVBQU9DLEdBQUlzQixFQUFTLE1BQzdEQSxFQUFRRyxTQUFRMUIsRUFBTzJCLFFBQVVKLEVBQVFHLFNBRy9CRSxFQURILFdBQ08sV0FBWUwsR0FBUyxFQUFNIiwiZmlsZSI6ImpzL2NodW5rcy84MTBjMjRkMjQwYjhmNTI2MzgzZDc5Yi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiI21hcGlkW2RhdGEtdi0yY2Y1Mjk3OF17bWluLWhlaWdodDpjYWxjKDEwMHZoIC0gNjRweCk7cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OmNhbGMoMTAwdmggLSA2NHB4KTt3aWR0aDoxMDAlfS5tYXAtdG9wLWRpYWxvZ1tkYXRhLXYtMmNmNTI5Nzhde3otaW5kZXg6MTAwMDEhaW1wb3J0YW50fVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3Jlc291cmNlcy9qcy9wYWdlcy9NYXAudnVlXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQXlMQSx3QkFDQSw2QkFBQSxDQUNBLGlCQUFBLENBQ0EseUJBQUEsQ0FDQSxVQUNBLENBQ0EsaUNBQ0EsdUJBQ0FcIixcInNvdXJjZXNDb250ZW50XCI6W1wiPHRlbXBsYXRlPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJtYS0wIHBhLTBcXFwiIHN0eWxlPVxcXCJwb3NpdGlvbjogcmVsYXRpdmU7IGRpc3BsYXk6IGZsZXg7XFxcIj5cXG4gICAgICAgIDxkaXYgaWQ9XFxcIm1hcGlkXFxcIj48L2Rpdj5cXG4gICAgICAgIDx2LWRpYWxvZyB2LW1vZGVsPVxcXCJzaG93XFxcIj5cXG4gICAgICAgICAgICA8di1jb250YWluZXIgbWFwLXRvcC1kaWFsb2c+XFxuICAgICAgICAgICAgICAgIDx2LWNhcmQgZWxldmF0aW9uPVxcXCIwXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDx2LWNhcmQtdGl0bGU+0KHQvtC30LTQsNC90LjQtSDQt9C+0L3Rizwvdi1jYXJkLXRpdGxlPlxcbiAgICAgICAgICAgICAgICAgICAgPHYtY2FyZC10ZXh0PlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDx2LXRleHQtZmllbGRcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XFxcInBsYWNlLm5hbWVcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cXFwi0J3QsNC30LLQsNC90LjQtVxcXCIvPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDx2LXRleHQtZmllbGRcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XFxcInBsYWNlLnBvaW50c1xcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XFxcIm51bWJlclxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVxcXCLQkdCw0LvQu9GLINCx0LvQsNCz0L7QtNCw0YDQvdC+0YHRgtC4XFxcIi8+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPHYtY29sb3ItcGlja2VyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3Qtc2l6ZT1cXFwiMzJcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlLWNhbnZhc1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZS1tb2RlLXN3aXRjaFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZT1cXFwiaGV4YVxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XFxcInBsYWNlLmNvbG9yXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dhdGNoZXMtbWF4LWhlaWdodD1cXFwiMjAwXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgID48L3YtY29sb3ItcGlja2VyPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDx2LWJ0biBjb2xvcj1cXFwiZGFya1xcXCIgQGNsaWNrPVxcXCJzYXZlXFxcIiA6ZGlzYWJsZWQ9XFxcInBsYWNlLm5hbWUgPT0gJydcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICDQodC+0YXRgNCw0L3QuNGC0YxcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3YtYnRuPlxcbiAgICAgICAgICAgICAgICAgICAgPC92LWNhcmQtdGV4dD5cXG4gICAgICAgICAgICAgICAgPC92LWNhcmQ+XFxuICAgICAgICAgICAgPC92LWNvbnRhaW5lcj5cXG4gICAgICAgIDwvdi1kaWFsb2c+XFxuICAgIDwvZGl2PlxcbjwvdGVtcGxhdGU+XFxuXFxuPHNjcmlwdD5cXG4gICAgZXhwb3J0IGRlZmF1bHQge1xcbiAgICAgICAgbmFtZTogXFxcIk1hcFxcXCIsXFxuICAgICAgICBkYXRhOiAodm0pID0+ICh7XFxuICAgICAgICAgICAgbXltYXAgOiBudWxsLFxcbiAgICAgICAgICAgIGVkaXRhYmxlTGF5ZXJzOm5ldyBMLkZlYXR1cmVHcm91cCgpLFxcbiAgICAgICAgICAgIHBsYWNlczogW10sXFxuICAgICAgICAgICAgcGxhY2U6IHt9LFxcbiAgICAgICAgICAgIHNob3c6IGZhbHNlLFxcbiAgICAgICAgICAgIGRyYXdDb250cm9sOiBudWxsLFxcbiAgICAgICAgfSksXFxuICAgICAgICBtb3VudGVkKCkge1xcbiAgICAgICAgICAgIHRoaXMubXltYXAgPSBMLm1hcCgnbWFwaWQnLCB7ZHJhd0NvbnRyb2w6IGZhbHNlfSkuc2V0VmlldyhbNTUuNTM2NDQ2LCA0Ny40OTg2MDBdLCAxMyk7XFxuICAgICAgICAgICAgbGV0IG9zbSA9IEwudGlsZUxheWVyKCdodHRwczovL2FwaS5tYXBib3guY29tL3N0eWxlcy92MS97aWR9L3RpbGVzL3t6fS97eH0ve3l9P2FjY2Vzc190b2tlbj1way5leUoxSWpvaWFuVnlZVGsySWl3aVlTSTZJbU5yY0d3MU1XVnpPREZrYXpReWQyODRialkwWldJeGJtSWlmUS5DV0c5TDJyTVN0TE8zaTNBT2dybnlRJywge1xcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPVxcXCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcXFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgSW1hZ2VyeSDCqSA8YSBocmVmPVxcXCJodHRwczovL3d3dy5tYXBib3guY29tL1xcXCI+TWFwYm94PC9hPicsXFxuICAgICAgICAgICAgICAgIG1heFpvb206IDE4LFxcbiAgICAgICAgICAgICAgICBpZDogJ21hcGJveC9zdHJlZXRzLXYxMScsXFxuICAgICAgICAgICAgICAgIHRpbGVTaXplOiA1MTIsXFxuICAgICAgICAgICAgICAgIHpvb21PZmZzZXQ6IC0xLFxcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogJ3lvdXIubWFwYm94LmFjY2Vzcy50b2tlbidcXG4gICAgICAgICAgICB9KVxcbiAgICAgICAgICAgIG9zbS5hZGRUbyh0aGlzLm15bWFwKVxcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcHJpZ2h0JyxcXG4gICAgICAgICAgICAgICAgZHJhdzoge1xcbiAgICAgICAgICAgICAgICAgICAgcG9seWxpbmU6IGZhbHNlLFxcbiAgICAgICAgICAgICAgICAgICAgcG9seWdvbjoge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93SW50ZXJzZWN0aW9uOiB0cnVlLCAvLyBSZXN0cmljdHMgc2hhcGVzIHRvIHNpbXBsZSBwb2x5Z29uc1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdFcnJvcjoge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNlMWUxMDAnLCAvLyBDb2xvciB0aGUgc2hhcGUgd2lsbCB0dXJuIHdoZW4gaW50ZXJzZWN0c1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn0JLRiyDQvdC1INC80L7QttC10YIg0L/QvtGB0YLQsNCy0LjRgtGMINGC0YPRgiDRgtC+0YfQutGDJyAvLyBNZXNzYWdlIHRoYXQgd2lsbCBzaG93IHdoZW4gaW50ZXJzZWN0XFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFwZU9wdGlvbnM6IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjYmFkYTU1J1xcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgICAgICAgICBjaXJjbGU6IGZhbHNlLCAvLyBUdXJucyBvZmYgdGhpcyBkcmF3aW5nIHRvb2xcXG4gICAgICAgICAgICAgICAgICAgIGNpcmNsZW1hcmtlcjogZmFsc2UsIC8vIFR1cm5zIG9mZiB0aGlzIGRyYXdpbmcgdG9vbFxcbiAgICAgICAgICAgICAgICAgICAgcmVjdGFuZ2xlOiBmYWxzZSxcXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcjogdHJ1ZSxcXG4gICAgICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICAgICAgZWRpdDoge1xcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZUdyb3VwOiB0aGlzLmVkaXRhYmxlTGF5ZXJzLCAvL1JFUVVJUkVEISFcXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZTogdHJ1ZSxcXG4gICAgICAgICAgICAgICAgICAgIGVkaXQ6IHRydWUsXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9O1xcbiAgICAgICAgICAgIHRoaXMubXltYXAuYWRkTGF5ZXIodGhpcy5lZGl0YWJsZUxheWVycyk7XFxuXFxuICAgICAgICAgICAgdGhpcy5kcmF3Q29udHJvbCA9IG5ldyBMLkNvbnRyb2wuRHJhdyhvcHRpb25zKTtcXG4gICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuYXV0aC51c2VyLnJvbGUgPT09IDEwMjQpIHRoaXMubXltYXAuYWRkQ29udHJvbCh0aGlzLmRyYXdDb250cm9sKTtcXG4gICAgICAgICAgICB0aGlzLm15bWFwLm9uKEwuRHJhdy5FdmVudC5DUkVBVEVELCAgKGUpID0+IHtcXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBlLmxheWVyVHlwZSxcXG4gICAgICAgICAgICAgICAgICAgIGxheWVyID0gZS5sYXllcjtcXG4gICAgICAgICAgICAgICAgdGhpcy5wbGFjZSA9IHtcXG4gICAgICAgICAgICAgICAgICAgIGNvb3JkczogZS5sYXllclR5cGUgPT09ICdwb2ludCcgPyBsYXllci5fbGF0bG5ncyA6IGxheWVyLl9sYXRsbmcsXFxuICAgICAgICAgICAgICAgICAgICBsYXllcixcXG4gICAgICAgICAgICAgICAgICAgIHR5cGUsXFxuICAgICAgICAgICAgICAgIH07XFxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdyA9IHRydWU7XFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgdGhpcy5teW1hcC5vbihMLkRyYXcuRXZlbnQuRURJVEVELCAgKGUpID0+IHtcXG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoZS5sYXllcnMuX2xheWVycykubGVuZ3RoICE9PSAxKSB7XFxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhlLmxheWVycy5fbGF5ZXJzKS5sZW5ndGg+MSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQvNC+0LbQvdC+INGC0L7Qu9GM0LrQviAxINC+0LHRitC10LrRgicpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKGUubGF5ZXJzLl9sYXllcnMpLmZvckVhY2goKGwpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2UgPSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubC5wbGFjZSxcXG4gICAgICAgICAgICAgICAgICAgICAgICBjb29yZHM6IGwuX2xhdGxuZ3MsXFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXI6bCxcXG4gICAgICAgICAgICAgICAgICAgIH07XFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3cgPSB0cnVlO1xcbiAgICAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICB0aGlzLm15bWFwLm9uKEwuRHJhdy5FdmVudC5ERUxFVEVELCAgKGUpID0+IHtcXG4gICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhlLmxheWVycy5fbGF5ZXJzKS5mb3JFYWNoKChsKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZShsLnBsYWNlKTtcXG4gICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICB9KTtcXG5cXG4gICAgICAgICAgICB0aGlzLmdldFBsYWNlcygpO1xcbiAgICAgICAgfSxcXG4gICAgICAgIG1ldGhvZHM6IHtcXG4gICAgICAgICAgICBhZGREaXZNYXJrZXIoY29vcmRzLCBjb2xvciwgcG9wdXApIHtcXG4gICAgICAgICAgICAgICAgY29uc3QgbXlDdXN0b21Db2xvdXIgPSBjb2xvci5zdWJzdHIoMCw3KTtcXG4gICAgICAgICAgICAgICAgY29uc3QgbWFya2VySHRtbFN0eWxlcyA9IGBiYWNrZ3JvdW5kLWNvbG9yOiAke215Q3VzdG9tQ29sb3VyfTsgd2lkdGg6IDJyZW07aGVpZ2h0OiAycmVtO2Rpc3BsYXk6IGJsb2NrO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogLTFyZW07dG9wOiAtMXJlbTtwb3NpdGlvbjogcmVsYXRpdmU7Ym9yZGVyLXJhZGl1czogMnJlbSAycmVtIDA7dHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpO2JvcmRlcjogMXB4IHNvbGlkICNGRkZGRkZgXFxuICAgICAgICAgICAgICAgIGNvbnN0IGljb24gPSBMLmRpdkljb24oe1xcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcXFwibXktY3VzdG9tLXBpblxcXCIsXFxuICAgICAgICAgICAgICAgICAgICBpY29uQW5jaG9yOiBbMCwgMjRdLFxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxBbmNob3I6IFstNiwgMF0sXFxuICAgICAgICAgICAgICAgICAgICBwb3B1cEFuY2hvcjogWzAsIC0zNl0sXFxuICAgICAgICAgICAgICAgICAgICBodG1sOiBgPHNwYW4gc3R5bGU9XFxcIiR7bWFya2VySHRtbFN0eWxlc31cXFwiIC8+YFxcbiAgICAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICAgICAgTC5tYXJrZXIoY29vcmRzLCB7aWNvbn0pXFxuICAgICAgICAgICAgICAgICAgICAuYWRkVG8odGhpcy5teW1hcClcXG4gICAgICAgICAgICAgICAgICAgIC5iaW5kUG9wdXAocG9wdXApO1xcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgZ2V0UGxhY2VzKCkge1xcbiAgICAgICAgICAgICAgICB3aW5kb3cuYXhpb3MuZ2V0KCcvbWFwT2JqZWN0LycsIHtwYXJhbXM6IHt9fSkudGhlbigocmVzcG9uc2UpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2VzID0gcmVzcG9uc2UuZGF0YS5kYXRhO1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZXMuZmlsdGVyKCh2KSA9PiB2LnR5cGUgPT09ICdwb2x5Z29uJykuZm9yRWFjaCgocCxpKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvbHlnb24gPSBMLnBvbHlnb24ocC5jb29yZHMsIHtjb2xvcjogcC5jb2xvcn0pO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb24uYWRkVG8odGhpcy5teW1hcClcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJpbmRQb3B1cChwLm5hbWUrJzxici8+JysocC5wb2ludHMgPiAwICA/ICfQotGA0LXQsdGD0Y7RgtGB0Y8g0LHQsNC70LvRizogJyArIHAucG9pbnRzIDogJycpKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlc1tpXS5wb2x5Z29uID0gcG9seWdvbjtcXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2x5Z29uLnBsYWNlID0gcDtcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRhYmxlTGF5ZXJzLmFkZExheWVyKHBvbHlnb24pO1xcbiAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2VzLmZpbHRlcigodikgPT4gdi50eXBlID09PSAnbWFya2VyJykuZm9yRWFjaCgocCxpKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZERpdk1hcmtlcih7bGF0OnAubGF0LCBsbmc6cC5sbmd9LCBwLmNvbG9yLCBwLm5hbWUrJzxici8+JysocC5wb2ludHMgPiAwICA/ICfQotGA0LXQsdGD0Y7RgtGB0Y8g0LHQsNC70LvRizogJyArIHAucG9pbnRzIDogJycpKTtcXG4gICAgICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcXG4gICAgICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICBzYXZlKCkge1xcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHtcXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBsYWNlLmlkLFxcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMucGxhY2UuY29sb3IsXFxuICAgICAgICAgICAgICAgICAgICBjb29yZHM6IHRoaXMucGxhY2UuY29vcmRzLFxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5wbGFjZS5uYW1lLFxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiB0aGlzLnBsYWNlLnBvaW50cyxcXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMucGxhY2UudHlwZSxcXG4gICAgICAgICAgICAgICAgfTtcXG4gICAgICAgICAgICAgICAgZGF0YS5jb2xvciA9IGRhdGEuY29sb3IuaGV4YSB8fCBkYXRhLmNvbG9yO1xcbiAgICAgICAgICAgICAgICB3aW5kb3cuYXhpb3NbZGF0YS5pZCA/J3B1dCcgOiAncG9zdCddKCcvbWFwT2JqZWN0LycrKGRhdGEuaWR8fCcnKSwgZGF0YSkudGhlbigocmVzcG9uc2UpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UGxhY2VzKCk7XFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlID0ge307XFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3cgPSBmYWxzZTtcXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMubXltYXAuYWRkTGF5ZXIodGhpcy5wbGFjZS5sYXllcik7XFxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICBhbGVydCgn0J7RiNC40LHQutCwLiDQn9GA0L7QstC10YDRjNGC0LUg0LTQsNC90L3Ri9C1LicpO1xcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XFxuICAgICAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgZGVsZXRlKHBsYWNlKXtcXG4gICAgICAgICAgICAgICAgd2luZG93LmF4aW9zLmRlbGV0ZSgnL21hcE9iamVjdC8nK3BsYWNlLmlkKS50aGVuKChyZXNwb25zZSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRQbGFjZXMoKTtcXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xcbiAgICAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH1cXG48L3NjcmlwdD5cXG5cXG48c3R5bGUgc2NvcGVkPlxcbiAgICAjbWFwaWQge1xcbiAgICAgICAgbWluLWhlaWdodDogY2FsYygxMDB2aCAtIDY0cHgpO1xcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XFxuICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwdmggLSA2NHB4KTtcXG4gICAgICAgIHdpZHRoOiAxMDAlO1xcbiAgICB9XFxuICAgIC5tYXAtdG9wLWRpYWxvZ3tcXG4gICAgICAgIHotaW5kZXg6IDEwMDAxICFpbXBvcnRhbnQ7XFxuICAgIH1cXG48L3N0eWxlPlxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCI8dGVtcGxhdGU+XG4gICAgPGRpdiBjbGFzcz1cIm1hLTAgcGEtMFwiIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OiBmbGV4O1wiPlxuICAgICAgICA8ZGl2IGlkPVwibWFwaWRcIj48L2Rpdj5cbiAgICAgICAgPHYtZGlhbG9nIHYtbW9kZWw9XCJzaG93XCI+XG4gICAgICAgICAgICA8di1jb250YWluZXIgbWFwLXRvcC1kaWFsb2c+XG4gICAgICAgICAgICAgICAgPHYtY2FyZCBlbGV2YXRpb249XCIwXCI+XG4gICAgICAgICAgICAgICAgICAgIDx2LWNhcmQtdGl0bGU+0KHQvtC30LTQsNC90LjQtSDQt9C+0L3Rizwvdi1jYXJkLXRpdGxlPlxuICAgICAgICAgICAgICAgICAgICA8di1jYXJkLXRleHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8di10ZXh0LWZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XCJwbGFjZS5uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9XCLQndCw0LfQstCw0L3QuNC1XCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHYtdGV4dC1maWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwicGxhY2UucG9pbnRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPVwi0JHQsNC70LvRiyDQsdC70LDQs9C+0LTQsNGA0L3QvtGB0YLQuFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx2LWNvbG9yLXBpY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3Qtc2l6ZT1cIjMyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZS1jYW52YXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZS1tb2RlLXN3aXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlPVwiaGV4YVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XCJwbGFjZS5jb2xvclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3YXRjaGVzLW1heC1oZWlnaHQ9XCIyMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvdi1jb2xvci1waWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8di1idG4gY29sb3I9XCJkYXJrXCIgQGNsaWNrPVwic2F2ZVwiIDpkaXNhYmxlZD1cInBsYWNlLm5hbWUgPT0gJydcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICDQodC+0YXRgNCw0L3QuNGC0YxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdi1idG4+XG4gICAgICAgICAgICAgICAgICAgIDwvdi1jYXJkLXRleHQ+XG4gICAgICAgICAgICAgICAgPC92LWNhcmQ+XG4gICAgICAgICAgICA8L3YtY29udGFpbmVyPlxuICAgICAgICA8L3YtZGlhbG9nPlxuICAgIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbiAgICBleHBvcnQgZGVmYXVsdCB7XG4gICAgICAgIG5hbWU6IFwiTWFwXCIsXG4gICAgICAgIGRhdGE6ICh2bSkgPT4gKHtcbiAgICAgICAgICAgIG15bWFwIDogbnVsbCxcbiAgICAgICAgICAgIGVkaXRhYmxlTGF5ZXJzOm5ldyBMLkZlYXR1cmVHcm91cCgpLFxuICAgICAgICAgICAgcGxhY2VzOiBbXSxcbiAgICAgICAgICAgIHBsYWNlOiB7fSxcbiAgICAgICAgICAgIHNob3c6IGZhbHNlLFxuICAgICAgICAgICAgZHJhd0NvbnRyb2w6IG51bGwsXG4gICAgICAgIH0pLFxuICAgICAgICBtb3VudGVkKCkge1xuICAgICAgICAgICAgdGhpcy5teW1hcCA9IEwubWFwKCdtYXBpZCcsIHtkcmF3Q29udHJvbDogZmFsc2V9KS5zZXRWaWV3KFs1NS41MzY0NDYsIDQ3LjQ5ODYwMF0sIDEzKTtcbiAgICAgICAgICAgIGxldCBvc20gPSBMLnRpbGVMYXllcignaHR0cHM6Ly9hcGkubWFwYm94LmNvbS9zdHlsZXMvdjEve2lkfS90aWxlcy97en0ve3h9L3t5fT9hY2Nlc3NfdG9rZW49cGsuZXlKMUlqb2lhblZ5WVRrMklpd2lZU0k2SW1OcmNHdzFNV1Z6T0RGa2F6UXlkMjg0YmpZMFpXSXhibUlpZlEuQ1dHOUwyck1TdExPM2kzQU9ncm55UScsIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCBJbWFnZXJ5IMKpIDxhIGhyZWY9XCJodHRwczovL3d3dy5tYXBib3guY29tL1wiPk1hcGJveDwvYT4nLFxuICAgICAgICAgICAgICAgIG1heFpvb206IDE4LFxuICAgICAgICAgICAgICAgIGlkOiAnbWFwYm94L3N0cmVldHMtdjExJyxcbiAgICAgICAgICAgICAgICB0aWxlU2l6ZTogNTEyLFxuICAgICAgICAgICAgICAgIHpvb21PZmZzZXQ6IC0xLFxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiAneW91ci5tYXBib3guYWNjZXNzLnRva2VuJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIG9zbS5hZGRUbyh0aGlzLm15bWFwKVxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3ByaWdodCcsXG4gICAgICAgICAgICAgICAgZHJhdzoge1xuICAgICAgICAgICAgICAgICAgICBwb2x5bGluZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHBvbHlnb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93SW50ZXJzZWN0aW9uOiB0cnVlLCAvLyBSZXN0cmljdHMgc2hhcGVzIHRvIHNpbXBsZSBwb2x5Z29uc1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhd0Vycm9yOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjZTFlMTAwJywgLy8gQ29sb3IgdGhlIHNoYXBlIHdpbGwgdHVybiB3aGVuIGludGVyc2VjdHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn0JLRiyDQvdC1INC80L7QttC10YIg0L/QvtGB0YLQsNCy0LjRgtGMINGC0YPRgiDRgtC+0YfQutGDJyAvLyBNZXNzYWdlIHRoYXQgd2lsbCBzaG93IHdoZW4gaW50ZXJzZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGVPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjYmFkYTU1J1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjaXJjbGU6IGZhbHNlLCAvLyBUdXJucyBvZmYgdGhpcyBkcmF3aW5nIHRvb2xcbiAgICAgICAgICAgICAgICAgICAgY2lyY2xlbWFya2VyOiBmYWxzZSwgLy8gVHVybnMgb2ZmIHRoaXMgZHJhd2luZyB0b29sXG4gICAgICAgICAgICAgICAgICAgIHJlY3RhbmdsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVkaXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZUdyb3VwOiB0aGlzLmVkaXRhYmxlTGF5ZXJzLCAvL1JFUVVJUkVEISFcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBlZGl0OiB0cnVlLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm15bWFwLmFkZExheWVyKHRoaXMuZWRpdGFibGVMYXllcnMpO1xuXG4gICAgICAgICAgICB0aGlzLmRyYXdDb250cm9sID0gbmV3IEwuQ29udHJvbC5EcmF3KG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmF1dGgudXNlci5yb2xlID09PSAxMDI0KSB0aGlzLm15bWFwLmFkZENvbnRyb2wodGhpcy5kcmF3Q29udHJvbCk7XG4gICAgICAgICAgICB0aGlzLm15bWFwLm9uKEwuRHJhdy5FdmVudC5DUkVBVEVELCAgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGUubGF5ZXJUeXBlLFxuICAgICAgICAgICAgICAgICAgICBsYXllciA9IGUubGF5ZXI7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGFjZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29vcmRzOiBlLmxheWVyVHlwZSA9PT0gJ3BvaW50JyA/IGxheWVyLl9sYXRsbmdzIDogbGF5ZXIuX2xhdGxuZyxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIsXG4gICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm15bWFwLm9uKEwuRHJhdy5FdmVudC5FRElURUQsICAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKGUubGF5ZXJzLl9sYXllcnMpLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhlLmxheWVycy5fbGF5ZXJzKS5sZW5ndGg+MSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ9Cg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINC80L7QttC90L4g0YLQvtC70YzQutC+IDEg0L7QsdGK0LXQutGCJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKGUubGF5ZXJzLl9sYXllcnMpLmZvckVhY2goKGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmwucGxhY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb29yZHM6IGwuX2xhdGxuZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllcjpsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm15bWFwLm9uKEwuRHJhdy5FdmVudC5ERUxFVEVELCAgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKGUubGF5ZXJzLl9sYXllcnMpLmZvckVhY2goKGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGUobC5wbGFjZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmdldFBsYWNlcygpO1xuICAgICAgICB9LFxuICAgICAgICBtZXRob2RzOiB7XG4gICAgICAgICAgICBhZGREaXZNYXJrZXIoY29vcmRzLCBjb2xvciwgcG9wdXApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBteUN1c3RvbUNvbG91ciA9IGNvbG9yLnN1YnN0cigwLDcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlckh0bWxTdHlsZXMgPSBgYmFja2dyb3VuZC1jb2xvcjogJHtteUN1c3RvbUNvbG91cn07IHdpZHRoOiAycmVtO2hlaWdodDogMnJlbTtkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogLTFyZW07dG9wOiAtMXJlbTtwb3NpdGlvbjogcmVsYXRpdmU7Ym9yZGVyLXJhZGl1czogMnJlbSAycmVtIDA7dHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpO2JvcmRlcjogMXB4IHNvbGlkICNGRkZGRkZgXG4gICAgICAgICAgICAgICAgY29uc3QgaWNvbiA9IEwuZGl2SWNvbih7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJteS1jdXN0b20tcGluXCIsXG4gICAgICAgICAgICAgICAgICAgIGljb25BbmNob3I6IFswLCAyNF0sXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsQW5jaG9yOiBbLTYsIDBdLFxuICAgICAgICAgICAgICAgICAgICBwb3B1cEFuY2hvcjogWzAsIC0zNl0sXG4gICAgICAgICAgICAgICAgICAgIGh0bWw6IGA8c3BhbiBzdHlsZT1cIiR7bWFya2VySHRtbFN0eWxlc31cIiAvPmBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBMLm1hcmtlcihjb29yZHMsIHtpY29ufSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvKHRoaXMubXltYXApXG4gICAgICAgICAgICAgICAgICAgIC5iaW5kUG9wdXAocG9wdXApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFBsYWNlcygpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYXhpb3MuZ2V0KCcvbWFwT2JqZWN0LycsIHtwYXJhbXM6IHt9fSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZXMgPSByZXNwb25zZS5kYXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2VzLmZpbHRlcigodikgPT4gdi50eXBlID09PSAncG9seWdvbicpLmZvckVhY2goKHAsaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvbHlnb24gPSBMLnBvbHlnb24ocC5jb29yZHMsIHtjb2xvcjogcC5jb2xvcn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9seWdvbi5hZGRUbyh0aGlzLm15bWFwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iaW5kUG9wdXAocC5uYW1lKyc8YnIvPicrKHAucG9pbnRzID4gMCAgPyAn0KLRgNC10LHRg9GO0YLRgdGPINCx0LDQu9C70Ys6ICcgKyBwLnBvaW50cyA6ICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlc1tpXS5wb2x5Z29uID0gcG9seWdvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb24ucGxhY2UgPSBwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0YWJsZUxheWVycy5hZGRMYXllcihwb2x5Z29uKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZXMuZmlsdGVyKCh2KSA9PiB2LnR5cGUgPT09ICdtYXJrZXInKS5mb3JFYWNoKChwLGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGREaXZNYXJrZXIoe2xhdDpwLmxhdCwgbG5nOnAubG5nfSwgcC5jb2xvciwgcC5uYW1lKyc8YnIvPicrKHAucG9pbnRzID4gMCAgPyAn0KLRgNC10LHRg9GO0YLRgdGPINCx0LDQu9C70Ys6ICcgKyBwLnBvaW50cyA6ICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2F2ZSgpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGxhY2UuaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLnBsYWNlLmNvbG9yLFxuICAgICAgICAgICAgICAgICAgICBjb29yZHM6IHRoaXMucGxhY2UuY29vcmRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLnBsYWNlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czogdGhpcy5wbGFjZS5wb2ludHMsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMucGxhY2UudHlwZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRhdGEuY29sb3IgPSBkYXRhLmNvbG9yLmhleGEgfHwgZGF0YS5jb2xvcjtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYXhpb3NbZGF0YS5pZCA/J3B1dCcgOiAncG9zdCddKCcvbWFwT2JqZWN0LycrKGRhdGEuaWR8fCcnKSwgZGF0YSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRQbGFjZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5teW1hcC5hZGRMYXllcih0aGlzLnBsYWNlLmxheWVyKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhbGVydCgn0J7RiNC40LHQutCwLiDQn9GA0L7QstC10YDRjNGC0LUg0LTQsNC90L3Ri9C1LicpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWxldGUocGxhY2Upe1xuICAgICAgICAgICAgICAgIHdpbmRvdy5heGlvcy5kZWxldGUoJy9tYXBPYmplY3QvJytwbGFjZS5pZCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRQbGFjZXMoKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbjwvc2NyaXB0PlxuXG48c3R5bGUgc2NvcGVkPlxuICAgICNtYXBpZCB7XG4gICAgICAgIG1pbi1oZWlnaHQ6IGNhbGMoMTAwdmggLSA2NHB4KTtcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIGhlaWdodDogY2FsYygxMDB2aCAtIDY0cHgpO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG4gICAgLm1hcC10b3AtZGlhbG9ne1xuICAgICAgICB6LWluZGV4OiAxMDAwMSAhaW1wb3J0YW50O1xuICAgIH1cbjwvc3R5bGU+XG4iLCJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTVbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vTWFwLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvYmFiZWwtbG9hZGVyL2xpYi9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC01WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL01hcC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmXCIiLCJpbXBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IGZyb20gXCIuL01hcC52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9MmNmNTI5Nzgmc2NvcGVkPXRydWUmXCJcbmltcG9ydCBzY3JpcHQgZnJvbSBcIi4vTWFwLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vTWFwLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuaW1wb3J0IHN0eWxlMCBmcm9tIFwiLi9NYXAudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9MmNmNTI5Nzgmc2NvcGVkPXRydWUmbGFuZz1jc3MmXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBcIjJjZjUyOTc4XCIsXG4gIG51bGxcbiAgXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIiwidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoJ2Rpdicse3N0YXRpY0NsYXNzOlwibWEtMCBwYS0wXCIsc3RhdGljU3R5bGU6e1wicG9zaXRpb25cIjpcInJlbGF0aXZlXCIsXCJkaXNwbGF5XCI6XCJmbGV4XCJ9fSxbX2MoJ2Rpdicse2F0dHJzOntcImlkXCI6XCJtYXBpZFwifX0pLF92bS5fdihcIiBcIiksX2MoJ3YtZGlhbG9nJyx7bW9kZWw6e3ZhbHVlOihfdm0uc2hvdyksY2FsbGJhY2s6ZnVuY3Rpb24gKCQkdikge192bS5zaG93PSQkdn0sZXhwcmVzc2lvbjpcInNob3dcIn19LFtfYygndi1jb250YWluZXInLHthdHRyczp7XCJtYXAtdG9wLWRpYWxvZ1wiOlwiXCJ9fSxbX2MoJ3YtY2FyZCcse2F0dHJzOntcImVsZXZhdGlvblwiOlwiMFwifX0sW19jKCd2LWNhcmQtdGl0bGUnLFtfdm0uX3YoXCLQodC+0LfQtNCw0L3QuNC1INC30L7QvdGLXCIpXSksX3ZtLl92KFwiIFwiKSxfYygndi1jYXJkLXRleHQnLFtfYygndi10ZXh0LWZpZWxkJyx7YXR0cnM6e1wibGFiZWxcIjpcItCd0LDQt9Cy0LDQvdC40LVcIn0sbW9kZWw6e3ZhbHVlOihfdm0ucGxhY2UubmFtZSksY2FsbGJhY2s6ZnVuY3Rpb24gKCQkdikge192bS4kc2V0KF92bS5wbGFjZSwgXCJuYW1lXCIsICQkdil9LGV4cHJlc3Npb246XCJwbGFjZS5uYW1lXCJ9fSksX3ZtLl92KFwiIFwiKSxfYygndi10ZXh0LWZpZWxkJyx7YXR0cnM6e1widHlwZVwiOlwibnVtYmVyXCIsXCJsYWJlbFwiOlwi0JHQsNC70LvRiyDQsdC70LDQs9C+0LTQsNGA0L3QvtGB0YLQuFwifSxtb2RlbDp7dmFsdWU6KF92bS5wbGFjZS5wb2ludHMpLGNhbGxiYWNrOmZ1bmN0aW9uICgkJHYpIHtfdm0uJHNldChfdm0ucGxhY2UsIFwicG9pbnRzXCIsICQkdil9LGV4cHJlc3Npb246XCJwbGFjZS5wb2ludHNcIn19KSxfdm0uX3YoXCIgXCIpLF9jKCd2LWNvbG9yLXBpY2tlcicse2F0dHJzOntcImRvdC1zaXplXCI6XCIzMlwiLFwiaGlkZS1jYW52YXNcIjpcIlwiLFwiaGlkZS1tb2RlLXN3aXRjaFwiOlwiXCIsXCJtb2RlXCI6XCJoZXhhXCIsXCJzd2F0Y2hlcy1tYXgtaGVpZ2h0XCI6XCIyMDBcIn0sbW9kZWw6e3ZhbHVlOihfdm0ucGxhY2UuY29sb3IpLGNhbGxiYWNrOmZ1bmN0aW9uICgkJHYpIHtfdm0uJHNldChfdm0ucGxhY2UsIFwiY29sb3JcIiwgJCR2KX0sZXhwcmVzc2lvbjpcInBsYWNlLmNvbG9yXCJ9fSksX3ZtLl92KFwiIFwiKSxfYygndi1idG4nLHthdHRyczp7XCJjb2xvclwiOlwiZGFya1wiLFwiZGlzYWJsZWRcIjpfdm0ucGxhY2UubmFtZSA9PSAnJ30sb246e1wiY2xpY2tcIjpfdm0uc2F2ZX19LFtfdm0uX3YoXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICDQodC+0YXRgNCw0L3QuNGC0YxcXG4gICAgICAgICAgICAgICAgICAgIFwiKV0pXSwxKV0sMSldLDEpXSwxKV0sMSl9XG52YXIgc3RhdGljUmVuZGVyRm5zID0gW11cblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC05WzBdLnJ1bGVzWzBdLnVzZVsxXSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTlbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vTWFwLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTJjZjUyOTc4JnNjb3BlZD10cnVlJmxhbmc9Y3NzJlwiKTtcbmlmKGNvbnRlbnQuX19lc01vZHVsZSkgY29udGVudCA9IGNvbnRlbnQuZGVmYXVsdDtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgYWRkID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpLmRlZmF1bHRcbnZhciB1cGRhdGUgPSBhZGQoXCJmYjNkOGI5Y1wiLCBjb250ZW50LCB0cnVlLCB7fSk7Il0sInNvdXJjZVJvb3QiOiIifQ==