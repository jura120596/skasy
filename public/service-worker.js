let cache_assets=["https://storage.googleapis.com/workbox-cdn/releases/4.3.1/workbox-sw.js","/","/js/app.js","/js/manifest.js","/css/app.css","/js/vendor.js"],cache_name="v3";function fromCache(e){return caches.open(cache_name).then((t=>t.match(e).then((e=>e||Promise.reject("no-match")))))}function update(e){return caches.open(cache_name).then((t=>fetch(e).then((s=>t.put(e,s.clone()).then((()=>s))))))}function refresh(e){return self.clients.matchAll().then((t=>{t.forEach((t=>{const s={type:"refresh",url:e.url,eTag:e.headers.get("ETag")};t.postMessage(JSON.stringify(s))}))}))}self.addEventListener("install",(e=>{console.log("installing..."),e.waitUntil(caches.open(cache_name).then((e=>e.addAll(cache_assets))).catch((e=>console.log(e))))})),self.addEventListener("fetch",(e=>{if(console.log(e.request.url),"GET"!==e.request.method)return fetch(e.request);e.respondWith(fromCache(e.request)),e.waitUntil(update(e.request).then(refresh))})),self.addEventListener("activate",(e=>{var t=[cache_name];e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(-1===t.indexOf(e))return caches.delete(e)}))))))}));
